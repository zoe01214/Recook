{"version":3,"sources":["webpack:///./src/views/Products.vue?11c1","webpack:///src/views/Products.vue","webpack:///./src/views/Products.vue?c466","webpack:///./src/views/Products.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_l","item","index","key","_id","image","_s","name","shortcut","style","greyoutline","quantity","price","outofstock","on","$event","preventDefault","addcart","outofstocktext","_e","isLoading","staticRenderFns","data","products","fullPage","methods","qt","component","VCard","VCol","VContainer","VDivider","VImg","VRow","VSheet"],"mappings":"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","file":"js/products.5b7db32c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"pa-0 px-lg-12 mb-12\",attrs:{\"fluid\":\"\",\"id\":\"products\"}},[_c('v-sheet',{staticClass:\"mx-3 px-lg-12 d-flex align-center mb-12\"},[_c('h2',{staticClass:\"header-title mr-6\"},[_vm._v(\"主廚市集\")]),_c('v-divider')],1),_c('v-sheet',{staticClass:\"mx-3 mx-lg-10 pa-8 rounded-xl bg-white-2 mt-12\"},[_c('v-row',{staticClass:\"py-5\"},_vm._l((_vm.products),function(item,index){return (item.sell)?_c('v-col',{key:item._id,staticClass:\"mb-12\",attrs:{\"cols\":\"12\",\"md\":\"6\",\"lg\":\"4\"}},[_c('router-link',{staticClass:\"d-flex justify-center\",attrs:{\"to\":'/products/' + item._id}},[_c('v-card',{staticClass:\"mx-3 mx-lg-12 text-center bgtrans\",attrs:{\"id\":\"productcard\",\"flat\":\"\",\"max-width\":\"550px\"}},[_c('v-sheet',{staticClass:\"bgtrans px-12 d-flex justify-center\"},[_c('v-img',{staticClass:\"circle\",attrs:{\"contain\":\"\",\"max-width\":\"230px\",\"src\":item.image[0]}})],1),_c('v-sheet',{staticClass:\"text-left bgtrans\"},[_c('v-divider',{staticClass:\"my-3\"}),_c('div',{staticClass:\"mb-2 name single-line\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"mb-5 text-subtitle-1 shcut\"},[_vm._v(_vm._s(item.shortcut))]),_c('v-sheet',{staticClass:\"btnborder d-flex align-center text-center bgtrans\"},[_c('div',{staticClass:\"pa-2 pricetext\",style:(_vm.greyoutline(item.quantity))},[_vm._v(\"NT.\"+_vm._s(item.price))]),_c('button',{staticClass:\"pa-2 bagtext\",style:(_vm.outofstock(item.quantity)),on:{\"click\":function($event){$event.preventDefault();return _vm.addcart(item._id)}}},[_vm._v(_vm._s(_vm.outofstocktext(item.quantity)))])])],1)],1)],1)],1):_vm._e()}),1)],1),_c('loading',{attrs:{\"height\":45,\"width\":45,\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\nv-container(fluid)#products.pa-0.px-lg-12.mb-12\n  v-sheet.mx-3.px-lg-12.d-flex.align-center.mb-12\n    h2.header-title.mr-6 主廚市集\n    v-divider\n  v-sheet.mx-3.mx-lg-10.pa-8.rounded-xl.bg-white-2.mt-12\n    v-row.py-5\n      v-col.mb-12(cols=\"12\" md=\"6\" lg=\"4\" v-for=\"(item,index) in products\" :key=\"item._id\" v-if=\"item.sell\")\n        router-link(:to=\"'/products/' + item._id\").d-flex.justify-center\n          v-card#productcard.mx-3.mx-lg-12(flat max-width=\"550px\").text-center.bgtrans\n            v-sheet.bgtrans.px-12.d-flex.justify-center\n              v-img.circle(contain max-width=\"230px\" :src=\"item.image[0]\")\n            v-sheet.text-left.bgtrans\n              v-divider.my-3\n              div.mb-2.name.single-line {{item.name}}\n              div.mb-5.text-subtitle-1.shcut {{item.shortcut}}\n              v-sheet.btnborder.d-flex.align-center.text-center.bgtrans\n                div(:style=\"greyoutline(item.quantity)\").pa-2.pricetext NT.{{item.price}}\n                button(@click.prevent=\"addcart(item._id)\" :style=\"outofstock(item.quantity)\").pa-2.bagtext {{outofstocktext(item.quantity)}}\n  loading(:height=\"45\" :width=\"45\" :active.sync=\"isLoading\")\n</template>\n\n<script>\nexport default ({\n  name: 'Products',\n  data () {\n    return {\n      products: [],\n      isLoading: false,\n      fullPage: true\n    }\n  },\n  methods: {\n    async addcart (id) {\n      if (this.user.islogin) {\n        if (this.$store.state.jwt.token.length === 0) {\n          this.$router.push('/login')\n        }\n\n        try {\n          await this.axios.post('/users/cart', { product: id, amount: 1 }, {\n            headers: {\n              authorization: 'Bearer ' + this.$store.state.jwt.token\n            }\n          })\n          this.$swal({\n            icon: 'success',\n            title: '成功',\n            text: '成功購物車'\n          })\n          const newdata = await this.axios.get('/users/cart', {\n            headers: {\n              authorization: 'Bearer ' + this.$store.state.jwt.token\n            }\n          })\n          this.$store.commit('changecart', newdata.data.result)\n        } catch (error) {\n          this.$swal({\n            icon: 'error',\n            title: '錯誤',\n            text: '加入購物車失敗'\n          })\n        }\n      } else {\n        this.$router.push('/login')\n      }\n    },\n    greyoutline (qt) {\n      return qt === 0 ? 'border-color: #c9c5c1;' : ''\n    },\n    outofstock (qt) {\n      return qt === 0 ? 'border-color: #c9c5c1;background-color:#c9c5c1;' : ''\n    },\n    outofstocktext (qt) {\n      return qt === 0 ? '商品已售完' : '放進購物車'\n    }\n  },\n  async mounted () {\n    try {\n      const vm = this\n      vm.isLoading = true\n      const { data } = await this.axios.get('/products')\n      this.products = data.result.map(p => {\n        p.image = p.image.map(i => `${process.env.VUE_APP_API}/files/${i}`)\n        return p\n      })\n      vm.isLoading = false\n    } catch (error) {\n      this.$swal({\n        icon: 'error',\n        title: '錯誤',\n        text: '取得商品失敗'\n      })\n    }\n  }\n})\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Products.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Products.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Products.vue?vue&type=template&id=51639f37&lang=pug&\"\nimport script from \"./Products.vue?vue&type=script&lang=js&\"\nexport * from \"./Products.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSheet } from 'vuetify/lib/components/VSheet';\ninstallComponents(component, {VCard,VCol,VContainer,VDivider,VImg,VRow,VSheet})\n"],"sourceRoot":""}