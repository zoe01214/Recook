{"version":3,"sources":["webpack:///./src/components/InputNumber.vue?4cec","webpack:///src/components/InputNumber.vue","webpack:///./src/components/InputNumber.vue?986d","webpack:///./src/components/InputNumber.vue","webpack:///./src/views/OrderManage.vue?5bf2","webpack:///src/views/OrderManage.vue","webpack:///./src/views/OrderManage.vue?a050","webpack:///./src/views/OrderManage.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","label","mask","outline","rules","value","on","$event","stopPropagation","increase","apply","arguments","decrease","$emit","staticRenderFns","props","type","String","default","min","Number","max","maxLength","Boolean","Array","step","height","computed","methods","isNaN","parseInt","component","VTextField","staticClass","headers","orders","search","scopedSlots","_u","key","fn","_v","model","callback","$$v","dialog","expression","editedItem","$set","state","_l","item","index","_id","_s","product","name","delproduct","products","close","save","proxy","ref","getColor","statetext","editItem","data","statedialog","deldialog","editedIndex","components","InputNumber","indexOf","Object","assign","$nextTick","splice","watch","val","VBtn","VCard","VCardActions","VCardText","VCardTitle","VChip","VCol","VContainer","VDataTable","VDialog","VIcon","VRow","VSelect","VSpacer","VToolbar","VToolbarTitle"],"mappings":"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","file":"js/ordermanage.e26c2b51.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-text-field',{attrs:{\"outlined\":\"\",\"append-icon\":\"$vuetify.icons.plus\",\"label\":_vm.label,\"mask\":_vm.mask,\"outline\":_vm.outline,\"prepend-inner-icon\":\"$vuetify.icons.minus\",\"rules\":_vm.rules,\"value\":_vm.value,\"dense\":\"\",\"solo\":\"\",\"flat\":\"\",\"color\":\"orange\"},on:{\"click:append\":function($event){$event.stopPropagation();return _vm.increase.apply(null, arguments)},\"click:prepend-inner\":function($event){$event.stopPropagation();return _vm.decrease.apply(null, arguments)},\"change\":function($event){return _vm.$emit(\"input\", $event)}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang='pug'>\n  v-text-field(\n    outlined\n    append-icon='$vuetify.icons.plus'\n    :label='label'\n    :mask='mask'\n    :outline='outline'\n    prepend-inner-icon='$vuetify.icons.minus'\n    :rules='rules'\n    :value='value'\n    dense\n    solo\n    flat\n    color=\"orange\"\n    @click:append.stop='increase'\n    @click:prepend-inner.stop='decrease'\n    @change='$emit(\"input\", $event)')\n</template>\n\n<script>\nexport default {\n  props: {\n    label: {\n      type: String,\n      default: ''\n    },\n    min: {\n      type: Number,\n      default: 1\n    },\n    max: {\n      type: Number,\n      default: 9999\n    },\n    maxLength: {\n      type: Number,\n      default: 4\n    },\n    outline: {\n      type: Boolean,\n      default: true\n    },\n    rules: {\n      type: Array,\n      default: () => []\n    },\n    step: {\n      type: Number,\n      default: 1\n    },\n    height: {\n      type: String\n    },\n    value: [String, Number]\n  },\n  computed: {\n    mask () {\n      let mask = ''\n      for (let i = 0; i < this.maxLength; i++) mask = `${mask}#`\n      return mask\n    }\n  },\n  methods: {\n    increase () {\n      if (isNaN(parseInt(this.value))) return this.$emit('input', this.step)\n      if (this.value === this.max) return\n      this.$emit('input', parseInt(this.value) + this.step)\n    },\n    decrease () {\n      if (isNaN(parseInt(this.value))) return this.$emit('input', this.min)\n      if (this.value === this.min) return\n      this.$emit('input', parseInt(this.value) - this.step)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputNumber.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputNumber.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InputNumber.vue?vue&type=template&id=4fdbb508&lang=pug&\"\nimport script from \"./InputNumber.vue?vue&type=script&lang=js&\"\nexport * from \"./InputNumber.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"pa-4\",attrs:{\"id\":\"postmanage\"}},[_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"items\":_vm.orders,\"search\":_vm.search},scopedSlots:_vm._u([{key:\"top\",fn:function(){return [_c('v-toolbar',{attrs:{\"flat\":\"\"}},[_c('v-toolbar-title',[_vm._v(\"訂單管理\"),_c('v-dialog',{attrs:{\"max-width\":\"800px\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"text-h5\"},[_vm._v(\"編輯訂單\")])]),_c('v-card-text',[_c('v-container',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-text-field',{attrs:{\"label\":\"收件人姓名\"},model:{value:(_vm.editedItem.name),callback:function ($$v) {_vm.$set(_vm.editedItem, \"name\", $$v)},expression:\"editedItem.name\"}}),_c('v-text-field',{attrs:{\"label\":\"收件人手機號碼\"},model:{value:(_vm.editedItem.phone),callback:function ($$v) {_vm.$set(_vm.editedItem, \"phone\", $$v)},expression:\"editedItem.phone\"}}),_c('v-text-field',{attrs:{\"label\":\"收件人地址\"},model:{value:(_vm.editedItem.address),callback:function ($$v) {_vm.$set(_vm.editedItem, \"address\", $$v)},expression:\"editedItem.address\"}}),_c('v-select',{attrs:{\"items\":_vm.state,\"item-text\":\"text\",\"item-value\":\"value\",\"label\":\"訂單狀態\"},model:{value:(_vm.editedItem.state),callback:function ($$v) {_vm.$set(_vm.editedItem, \"state\", $$v)},expression:\"editedItem.state\"}}),_c('p',[_vm._v(\"訂單內容\")]),_vm._l((_vm.editedItem.products),function(item,index){return _c('v-card',{key:item._id,attrs:{\"flat\":\"\"}},[_c('div',{staticClass:\"d-flex\"},[_c('p',[_vm._v(_vm._s(item.product.name))]),_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"red\"},on:{\"click\":function($event){return _vm.delproduct(index)}}},[_vm._v(\"刪除商品\")])],1),_c('InputNumber',{model:{value:(_vm.editedItem.products[index].amount),callback:function ($$v) {_vm.$set(_vm.editedItem.products[index], \"amount\", $$v)},expression:\"editedItem.products[index].amount\"}})],1)})],2)],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":_vm.close}},[_vm._v(\"取消\")]),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)],1)],1)],1),_c('v-spacer'),_c('v-text-field',{attrs:{\"append-icon\":\"mdi-magnify\",\"label\":\"Search\",\"single-line\":\"\",\"hide-details\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1)]},proxy:true},{key:\"item.state\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-chip',{staticClass:\"white--text\",attrs:{\"small\":\"\",\"color\":_vm.getColor(item.state)}},[_vm._v(_vm._s(_vm.statetext (item.state)))])]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.editItem(item)}}},[_vm._v(\"mdi-pencil\")])]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\nv-container#postmanage.pa-4\n  v-data-table(:headers=\"headers\" :items=\"orders\" :search=\"search\")\n    template(v-slot:top)\n      v-toolbar(flat)\n        v-toolbar-title 訂單管理\n          v-dialog(v-model=\"dialog\" max-width=\"800px\")\n            v-card\n              v-card-title\n                span(class=\"text-h5\") 編輯訂單\n              v-card-text\n                v-container\n                  v-row\n                    v-col(cols=\"12\")\n                      v-text-field(v-model=\"editedItem.name\" label=\"收件人姓名\")\n                      v-text-field(v-model=\"editedItem.phone\" label=\"收件人手機號碼\")\n                      v-text-field(v-model=\"editedItem.address\" label=\"收件人地址\")\n                      v-select(:items=\"state\" item-text=\"text\" item-value=\"value\" v-model=\"editedItem.state\" label=\"訂單狀態\")\n                      p 訂單內容\n                      v-card(flat v-for=\"(item, index) of editedItem.products\" :key=\"item._id\")\n                        div.d-flex\n                          p {{item.product.name}}\n                          v-spacer\n                          v-btn(text color=\"red\" @click=\"delproduct(index)\") 刪除商品\n                        InputNumber(v-model=\"editedItem.products[index].amount\")\n              v-card-actions\n                v-spacer\n                v-btn(color=\"blue darken-1\" text @click=\"close\") 取消\n                v-btn(color=\"blue darken-1\" text @click=\"save\") 保存\n        v-spacer\n        v-text-field(v-model=\"search\" append-icon=\"mdi-magnify\" label=\"Search\" single-line hide-details)\n    template(v-slot:item.state=\"{ item }\")\n      v-chip.white--text(small :color=\"getColor(item.state)\") {{ statetext (item.state) }}\n    template(v-slot:item.actions=\"{ item }\")\n      v-icon(small class=\"mr-2\" @click=\"editItem(item)\") mdi-pencil\n</template>\n\n<script>\nimport InputNumber from '@/components/InputNumber.vue'\n\nexport default ({\n  name: 'PostManage',\n  data () {\n    return {\n      orders: [],\n      search: '',\n      headers: [\n        {\n          text: '訂單編號',\n          align: 'start',\n          sortable: false,\n          value: '_id'\n        },\n        { text: '訂購人', value: 'user.account' },\n        { text: '收件人', value: 'name' },\n        { text: '日期', value: 'date' },\n        { text: '商品數量', value: 'productnum' },\n        { text: '總金額', value: 'total' },\n        { text: '狀態', value: 'state' },\n        { text: '編輯', value: 'actions', sortable: false }\n      ],\n      statedialog: false,\n      deldialog: false,\n      dialog: false,\n      editedIndex: -1,\n      editedItem: {\n        name: '',\n        products: [],\n        state: 1\n      },\n      state: [\n        { text: '訂單成立', value: 1 },\n        { text: '訂單取消', value: 0 },\n        { text: '訂單已完成', value: 2 }\n      ]\n    }\n  },\n  components: {\n    InputNumber\n  },\n  methods: {\n    editItem (item) {\n      this.editedIndex = this.orders.indexOf(item)\n      this.editedItem = Object.assign({}, item)\n      this.dialog = true\n    },\n    close () {\n      this.dialog = false\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem)\n        this.editedIndex = -1\n      })\n    },\n    async save () {\n      try {\n        const newdata = {\n          products: this.editedItem.products,\n          name: this.editedItem.name,\n          phone: this.editedItem.phone,\n          address: this.editedItem.address,\n          state: this.editedItem.state\n        }\n        if (this.editedIndex > -1) {\n          // 編輯\n          await this.axios.patch('/orders/' + this.orders[this.editedIndex]._id, newdata, {\n            headers: {\n              authorization: 'Bearer ' + this.$store.state.jwt.token\n            }\n          })\n        }\n        this.$swal({\n          icon: 'success',\n          title: '成功',\n          text: '訂單修改成功'\n        })\n        const { data } = await this.axios.get('/orders/all')\n        this.orders = data.result.map(order => {\n          order.date = new Date(order.date).toLocaleString().slice(0, 10)\n          order.total = order.products.map(i => i.amount * i.product.price).reduce((acc, cur) => acc + cur)\n          order.detail = order.products.map(i => `${i.product.name} ${i.amount} 個`).join(', ')\n          return order\n        })\n        this.close()\n      } catch (error) {\n        this.$swal({\n          icon: 'error',\n          title: '錯誤',\n          text: error.response.data.message\n        })\n      }\n    },\n    delproduct (index) {\n      this.editedItem.products.splice(index, 1)\n    },\n    getColor (value) {\n      return value === 1 ? 'green' : value === 0 ? 'red' : 'grey'\n    },\n    statetext (value) {\n      return value === 1 ? '成立' : value === 0 ? '取消' : '已完成'\n    }\n  },\n  async mounted () {\n    const { data } = await this.axios.get('/orders/all', {\n      headers: {\n        authorization: 'Bearer ' + this.$store.state.jwt.token\n      }\n    })\n    this.orders = data.result.map(order => {\n      order.date = new Date(order.date).toLocaleString().slice(0, 10)\n      order.productnum = order.products.map(i => i.amount).reduce((acc, cur) => acc + cur)\n      order.total = order.products.map(i => i.amount * i.product.price).reduce((acc, cur) => acc + cur)\n      order.detail = order.products.map(i => `${i.product.name} ${i.amount} 個`).join(', ')\n      return order\n    })\n  },\n  watch: {\n    dialog (val) {\n      val || this.close()\n    }\n  }\n})\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderManage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderManage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrderManage.vue?vue&type=template&id=1ae32462&lang=pug&\"\nimport script from \"./OrderManage.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderManage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VChip,VCol,VContainer,VDataTable,VDialog,VIcon,VRow,VSelect,VSpacer,VTextField,VToolbar,VToolbarTitle})\n"],"sourceRoot":""}