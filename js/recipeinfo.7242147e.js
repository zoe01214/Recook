(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["recipeinfo"],{"63b7":function(t,e,s){},"8cd0":function(t,e,s){},"99d9":function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return o})),s.d(e,"c",(function(){return c}));var a=s("b0af"),i=s("80d2"),r=Object(i["h"])("v-card__actions"),n=Object(i["h"])("v-card__subtitle"),o=Object(i["h"])("v-card__text"),c=Object(i["h"])("v-card__title");a["a"]},d2fb:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticClass:"pa-0 px-lg-12 mb-12",attrs:{fluid:"",id:"recipeinfo"}},[s("v-sheet",{staticClass:"mx-3 mx-lg-10 rounded-xl mt-3 mb-12"},[s("v-row",{staticClass:"trigger"},[s("v-col",{staticClass:"order-lg-2 d-none d-lg-flex justify-end img-container",attrs:{id:"bigcarousel",cols:"12",lg:"4"}},[s("v-sheet",{staticClass:"imgfixed",style:t.scrollY,attrs:{width:"100%"}},[s("v-carousel",{staticClass:"rounded-lg mb-3 carousel-height",attrs:{"hide-delimiter-background":"","show-arrows-on-hover":"",max:""}},[t.recipe.video?s("v-carousel-item",{staticClass:"carousel-height",attrs:{"reverse-transition":"fade-transition",transition:"fade-transition"}},[s("iframe",{attrs:{width:"100%",height:"100%",src:t.recipe.video,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]):t._e(),t._l(t.recipe.image,(function(e,a){return s("v-carousel-item",{key:a,staticClass:"carousel-height",attrs:{src:e,"reverse-transition":"fade-transition",transition:"fade-transition"}},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"ma-2"},[s("v-btn",{attrs:{small:"",icon:"",fab:""},on:{click:function(e){return e.preventDefault(),t.likes.apply(null,arguments)}}},[s("v-icon",{staticClass:"white--text"},[t._v(t._s(t.likeicon))])],1),s("span",{staticClass:"overline white--text"},[t._v(t._s(t.recipe.likes.length))])],1),s("v-spacer"),s("div",{staticClass:"ma-2"},[s("v-btn",{attrs:{small:"",icon:"",fab:""},on:{click:function(e){return e.preventDefault(),t.favorites.apply(null,arguments)}}},[s("v-icon",{staticClass:"white--text"},[t._v(t._s(t.favicon))])],1)],1)],1)])}))],2),s("div",{staticClass:"text-right text-caption grey--text"},[t._v("Published: "+t._s(t.recipe.publish_date))])],1)],1),s("v-col",{staticClass:"order-md-1 leftsection",attrs:{cols:"12",lg:"8"}},[s("v-sheet",{staticClass:"px-6 px-lg-0 pr-lg-6"},[s("div",[s("v-sheet",{staticClass:"d-flex align-center"},[s("router-link",{staticClass:"d-flex align-center",attrs:{to:"/user/"+t.author._id}},[t.author.avatar.length>0?s("v-avatar",{staticClass:"d-flex mr-3",attrs:{size:t.avatar.size}},[s("img",{attrs:{src:t.author.avatar}})]):s("avatar",{staticClass:"d-flex mr-3",attrs:{size:t.avatar.size,name:t.author.account,variant:t.avatar.variant,colors:t.avatar.colors}}),s("div",[s("h3",{staticClass:"mb-2 single-line black--text"},[t._v(t._s(t.username))]),s("div",{staticClass:"text-subtitle-2 single-line grey--text font-weight-light mt-n2"},[t._v(t._s(t.author.total)+" 道食譜 "+t._s(t.author.follower.length)+" 位粉絲")])])],1),s("v-spacer"),t.user._id===t.author._id?s("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[s("v-btn",t._g(t._b({attrs:{outlined:"",color:"#DEA56A"}},"v-btn",i,!1),a),[s("span",{staticClass:"font-h5"},[t._v("編輯食譜")]),s("v-icon",{attrs:{"x-small":""}},[t._v("mdi-chevron-down")])],1)]}}],null,!1,3296583052)},[s("v-list",{attrs:{dense:""}},[s("v-list-item",{staticClass:"d-flex justify-center",attrs:{to:"/recipe/edit/"+t.recipe._id}},[s("div",{staticClass:"subtitle-1"},[t._v("修改")])]),s("v-list-item",{staticClass:"d-flex justify-center",on:{click:t.delRecipeById}},[s("div",{staticClass:"subtitle-1 red--text"},[t._v("刪除")])])],1)],1):t._e(),s("div",{staticClass:"d-flex align-center"},[t.nowuser.follow||t.user._id===t.author._id?t._e():s("v-btn",{staticClass:"orangebtn",attrs:{depressed:""},on:{click:t.follow}},[s("span",{staticClass:"font-h5 white--text"},[t._v("追蹤")])]),t.nowuser.follow&&t.user._id!==t.author._id?s("v-btn",{attrs:{depressed:"",outlined:"",color:"#DEA56A"},on:{click:t.follow}},[s("span",{staticClass:"font-h5"},[t._v("追蹤中")]),s("v-icon",{attrs:{"x-small":""}},[t._v("mdi-chevron-down")])],1):t._e()],1)],1)],1),s("v-divider",{staticClass:"my-3"}),s("div",[s("div",{staticClass:"d-flex d-lg-none flex-column",attrs:{id:"smcarousel"}},[s("v-carousel",{staticClass:"rounded-lg mb-3",attrs:{"hide-delimiter-background":"","show-arrows-on-hover":"",max:""}},[t.recipe.video?s("v-carousel-item",{attrs:{"reverse-transition":"fade-transition",transition:"fade-transition"}},[s("iframe",{attrs:{width:"100%",height:"100%",src:t.recipe.video,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]):t._e(),t._l(t.recipe.image,(function(e,a){return s("v-carousel-item",{key:a,attrs:{src:e,"reverse-transition":"fade-transition",transition:"fade-transition"}},[s("div",{staticClass:"d-flex"},[s("div",[s("v-btn",{attrs:{"x-small":"",icon:"",fab:""},on:{click:function(e){return e.preventDefault(),t.likes.apply(null,arguments)}}},[s("v-icon",{staticClass:"white--text"},[t._v(t._s(t.likeicon))])],1),s("span",{staticClass:"overline white--text"},[t._v(t._s(t.likecount))])],1),s("v-spacer"),s("v-btn",{attrs:{"x-small":"",icon:"",fab:""},on:{click:function(e){return e.preventDefault(),t.favorites.apply(null,arguments)}}},[s("v-icon",{staticClass:"white--text"},[t._v(t._s(t.favicon))])],1)],1)])}))],2),s("div",{staticClass:"text-right text-caption grey--text"},[t._v("Published: "+t._s(t.recipe.publish_date))]),s("v-divider",{staticClass:"mt-3 mb-6"})],1),s("p",{staticClass:"text-h5 font-weight-bold d-flex align-center mb-6"},[s("span",{staticClass:"mr-3"},[t._v(t._s(t.recipe.name))]),t.recipe.video?s("v-sheet",{staticClass:"text-caption red white--text px-1",attrs:{rounded:""}},[t._v("video")]):t._e()],1),s("p",{staticClass:"mb-8 text-body-1",staticStyle:{"white-space":"pre-wrap","line-height":"1.5rem"}},[t._v(t._s(t.recipe.description))]),s("v-sheet",{staticClass:"d-flex justify-center align-center mb-6",attrs:{width:"100%"}},[s("v-sheet",{staticClass:"text-center",attrs:{width:"50%",outlined:""}},[s("div",{staticClass:"timeheight"},[t._v("份量")]),s("v-divider"),s("div",{staticClass:"timeheight text-h6"},[t._v(t._s(t.recipe.servings)),s("div",{staticClass:"timecaption"},[s("div",{staticClass:"caption"},[t._v("人份")])])])],1),s("v-sheet",{staticClass:"text-center",attrs:{width:"50%",outlined:""}},[s("div",{staticClass:"timeheight"},[t._v("時間")]),s("v-divider"),s("div",{staticClass:"timeheight text-h6"},[t._v(t._s(t.recipe.time)),s("div",{staticClass:"timecaption"},[s("div",{staticClass:"caption"},[t._v("分鐘")])])])],1)],1)],1),s("v-sheet",{staticClass:"mb-6",attrs:{width:"100%"}},[s("p",{staticClass:"text-h5"},[t._v("食材")]),s("v-sheet",{staticClass:"rounded-lg pa-5",attrs:{outlined:""}},t._l(t.recipe.ingredients,(function(e){return s("v-container",{key:e._id,staticClass:"d-flex"},[s("div",{staticClass:"subtitle-1"},[t._v(t._s(e.ingredient))]),s("v-spacer"),s("div",{staticClass:"subtitle-1"},[t._v(t._s(e.portion))])],1)})),1)],1)],1),s("v-sheet",{staticClass:"px-6 px-lg-0 pr-lg-6"},[s("p",{staticClass:"text-h5"},[t._v("作法")]),t._l(t.recipe.instructions,(function(e,a){return s("v-card",{key:a,staticClass:"pa-5 rounded-lg my-3",attrs:{elevation:"0",outlined:""}},[s("div",{staticClass:"text-overline font-weight-light"},[t._v(t._s(t.nowstep(a)))]),s("v-card-text",{staticClass:"text-body-1 black--text",staticStyle:{"white-space":"pre-wrap","line-height":"1.5rem"}},[t._v(t._s(e))])],1)}))],2),s("v-sheet",{staticClass:"px-6 px-lg-0 pr-lg-6"},[s("p",{staticClass:"text-h5"},[t._v("留言")]),t._l(t.recipe.comments,(function(e,a){return 0!==e.isEnabled?s("v-card",{key:a,staticClass:"pa-5 rounded-lg my-3",attrs:{elevation:"0",outlined:""}},[s("v-sheet",{staticClass:"d-flex align-center"},[void 0!==e.users.avatar&&e.users.avatar.length>0&&""!==e.users.avatar?s("v-avatar",{staticClass:"d-flex mr-3",attrs:{size:t.avatar.size-20}},[s("img",{attrs:{src:e.users.avatar}})]):s("avatar",{staticClass:"d-flex mr-3",attrs:{size:t.avatar.size-20,name:e.users.account,variant:t.avatar.variant,colors:t.avatar.colors}}),s("h3",{staticClass:"black--text"},[t._v(t._s(e.users.username))]),s("v-spacer"),s("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[s("v-btn",t._g(t._b({staticClass:"square",attrs:{small:"",text:""}},"v-btn",i,!1),a),[s("v-icon",[t._v("mdi-dots-horizontal")])],1)]}}],null,!0)},[s("v-list",{attrs:{dense:""}},[s("v-dialog",{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(i){var r=i.on,n=i.attrs;return[e.users._id===t.user._id?s("v-list-item",t._g(t._b({on:{click:function(e){return t.editmodel(a)}}},"v-list-item",n,!1),r),[t._v("編輯")]):t._e()]}}],null,!0),model:{value:t.editdialog,callback:function(e){t.editdialog=e},expression:"editdialog"}},[s("v-card",{staticClass:"pa-5"},[s("v-sheet",{staticClass:"d-flex align-center"},[t.user.isavatar?s("v-avatar",{staticClass:"d-flex mr-3",attrs:{size:t.avatar.size-20}},[s("img",{attrs:{src:t.user.avatar}})]):s("avatar",{staticClass:"d-flex mr-3",attrs:{size:t.avatar.size-20,name:t.user.username,variant:t.avatar.variant,colors:t.avatar.colors}}),s("h3",{staticClass:"black--text single-line"},[t._v(t._s(t.user.username))])],1),s("v-textarea",{model:{value:t.commentmodel,callback:function(e){t.commentmodel=e},expression:"commentmodel"}},[t._v(t._s(t.commentmodel))]),s("div",{staticClass:"text-right"},[s("v-btn",{staticClass:"black",attrs:{outlined:""},on:{click:function(e){return t.editmsg(a)}}},[s("span",{staticClass:"white--text"},[t._v("修改")])])],1)],1)],1),e.users._id===t.user._id?s("v-list-item",{on:{click:function(e){return t.delmsg(a)}}},[t._v("刪除")]):t._e(),s("v-dialog",{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[s("v-list-item",t._g(t._b({},"v-list-item",i,!1),a),[t._v("檢舉")])]}}],null,!0),model:{value:t.reportdialog,callback:function(e){t.reportdialog=e},expression:"reportdialog"}},[s("v-card",{staticClass:"pa-5"},[s("h3",[t._v("檢舉留言")]),s("v-textarea",{attrs:{placeholder:"檢舉原因..."},model:{value:t.newreason,callback:function(e){t.newreason=e},expression:"newreason"}}),s("div",{staticClass:"text-right"},[s("v-btn",{staticClass:"black",attrs:{outlined:""},on:{click:function(e){return t.submitreport(a)}}},[s("span",{staticClass:"white--text"},[t._v("送出")])])],1)],1)],1)],1)],1)],1),s("v-card-text",{staticClass:"text-body-1 black--text",staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(e.content))]),s("div",{staticClass:"text-right msgdate caption grey--text"},[t._v("Published: "+t._s(e.date.slice(0,10)))])],1):t._e()})),s("v-card",{staticClass:"my-8",attrs:{flat:""}},[s("v-btn",{staticClass:"orangebtn",attrs:{text:"",block:""},on:{click:function(e){t.msgdialog=!t.msgdialog}}},[s("span",{staticClass:"font-h4 spacing"},[t._v("新增留言")])])],1)],2)],1)],1)],1),s("v-speed-dial",{staticClass:"d-none d-lg-flex",attrs:{direction:"left",transition:t.author.transition},scopedSlots:t._u([{key:"activator",fn:function(){return[s("v-btn",{staticClass:"floatbtn",attrs:{fab:""},model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[t.fab?s("v-icon",[t._v("mdi-close")]):s("v-icon",[t._v("mdi-dots-horizontal")])],1)]},proxy:!0}]),model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[s("v-btn",{staticClass:"floatsm",attrs:{fab:"",dark:"",small:"",outlined:""},on:{click:function(e){t.msgdialog=!t.msgdialog}}},[s("v-icon",[t._v("mdi-message-outline")])],1),s("v-btn",{staticClass:"floatsm",attrs:{fab:"",dark:"",small:"",outlined:""},on:{click:t.favorites}},[s("v-icon",[t._v(t._s(t.favicon))])],1),s("v-btn",{staticClass:"floatsm",attrs:{fab:"",dark:"",small:"",outlined:""},on:{click:t.likes}},[s("v-icon",[t._v(t._s(t.likeicon))])],1)],1),s("v-dialog",{attrs:{"max-width":"500"},model:{value:t.msgdialog,callback:function(e){t.msgdialog=e},expression:"msgdialog"}},[s("v-card",{staticClass:"pa-5"},[s("v-sheet",{staticClass:"d-flex align-center"},[t.user.isavatar?s("v-avatar",{staticClass:"d-flex mr-3",attrs:{size:t.avatar.size-20}},[s("img",{attrs:{src:t.user.avatar}})]):s("avatar",{staticClass:"d-flex mr-3",attrs:{size:t.avatar.size-20,name:t.user.username,variant:t.avatar.variant,colors:t.avatar.colors}}),s("h3",{staticClass:"black--text"},[t._v(t._s(t.user.username))])],1),s("v-textarea",{attrs:{placeholder:"新增留言..."},model:{value:t.newcomment,callback:function(e){t.newcomment=e},expression:"newcomment"}}),s("div",{staticClass:"text-right"},[s("v-btn",{staticClass:"black",attrs:{outlined:""},on:{click:t.submitmsg}},[s("span",{staticClass:"white--text"},[t._v("發佈")])])],1)],1)],1),s("loading",{attrs:{height:45,width:45,active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}})],1)},i=[],r=s("1da1"),n=(s("d81d"),s("a434"),s("99af"),s("fb6a"),s("b0c0"),s("ac1f"),s("466d"),s("4de4"),s("96cf"),s("cffa")),o=s("1dac");n["a"].registerPlugin(o["b"]);var c={name:"RecipeInfo",data:function(){return{headers:[{text:"準備食材",align:"start",value:"ingredient"},{text:"食材份量",align:"start",value:"portion"}],recipe:[],author:{account:"",username:"",profile:"",total:0,avatar:"",follow:!1,follower:[],following:[],recipes:[],_id:"",direction:"left",transition:"slide-y-reverse-transition"},nowuser:{following:[],likes:[],favorites:[]},avatar:{size:55,colors:["#F0F2DC","#F9D365","#D9EB52","#87796F","#9FA789"],variant:"beam"},msgdialog:!1,newcomment:"",commentmodel:"",reportdialog:!1,newreason:"",editdialog:!1,fab:!1,isLoading:!1,fullPage:!0,scrollY:{transform:"translateY(0px)"}}},created:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},computed:{likeicon:function(){return this.nowuser.like?"mdi-heart":"mdi-heart-outline"},favicon:function(){return this.nowuser.favorite?"mdi-bookmark":"mdi-bookmark-outline"},username:function(){return this.author.username?this.author.username:this.author.account},likecount:function(){return void 0!==this.recipe.likes?this.recipe.likes.length:0}},methods:{delRecipeById:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.patch("/recipes/del/"+t.recipe._id,{isEnabled:0},{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 3:t.$swal({icon:"success",title:"成功",text:"食譜刪除成功"}),t.$router.push("/recipes/"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},follow:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.user.islogin){e.next=7;break}return e.next=3,t.axios.patch("/users/follow/"+t.$store.state.user._id,{_id:t.author._id},{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 3:t.nowuser.follow?(s=t.author.follower.map((function(t){return t.users})).indexOf(t.$store.state.user._id),t.author.follower.splice(s,1),a=t.nowuser.following.map((function(t){return t.users})).indexOf(t.author._id),t.nowuser.following.splice(a,1)):(t.author.follower.push({users:t.$store.state.user._id}),t.nowuser.following.push({users:t.author._id})),t.nowuser.follow=!t.nowuser.follow,e.next=8;break;case 7:t.$router.push("/login");case 8:case"end":return e.stop()}}),e)})))()},likes:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.user.islogin){e.next=7;break}return e.next=3,t.axios.patch("/users/like/"+t.$store.state.user._id,{_id:t.recipe._id},{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 3:t.nowuser.like?(s=t.recipe.likes.map((function(t){return t.users})).indexOf(t.$store.state.user._id),t.recipe.likes.splice(s,1),a=t.nowuser.likes.map((function(t){return t.recipes})).indexOf(t.recipe._id),t.nowuser.likes.splice(a,1)):(t.recipe.likes.push({user:t.$store.state.user._id}),t.nowuser.likes.push({recipes:t.recipe._id})),t.nowuser.like=!t.nowuser.like,e.next=8;break;case 7:t.$router.push("/login");case 8:case"end":return e.stop()}}),e)})))()},favorites:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.user.islogin){e.next=7;break}return e.next=3,t.axios.patch("/users/favorite/"+t.$store.state.user._id,{_id:t.recipe._id},{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 3:t.nowuser.favorite?(s=t.nowuser.favorites.map((function(t){return t.recipes})).indexOf(t.recipe._id),t.nowuser.favorites.splice(s,1)):t.nowuser.favorites.push({recipes:t.recipe._id}),t.nowuser.favorite=!t.nowuser.favorite,e.next=8;break;case 7:t.$router.push("/login");case 8:case"end":return e.stop()}}),e)})))()},submitmsg:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s={_id:t.user._id,content:t.newcomment,date:Date.now()},e.next=4,t.axios.patch("/recipes/msg/"+t.recipe._id,s,{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 4:t.$swal({icon:"success",title:"成功",text:"食譜留言成功"}),t.recipe.comments.push({content:t.newcomment,date:"".concat((new Date).getFullYear(),"-").concat((new Date).getMonth()<10?"0".concat((new Date).getMonth()+1):"".concat((new Date).getMonth()),"-").concat((new Date).getDate()<10?"0".concat((new Date).getDate()):(new Date).getDate()),isEnabled:1,users:{_id:t.user._id,account:t.user.account,username:t.user.username,avatar:t.user.avatar}}),t.newcomment="",t.msgdialog=!1,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},editmodel:function(t){this.commentmodel=this.recipe.comments[t].content},editmsg:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,a={_id:e.recipe.comments[t]._id,content:e.commentmodel},s.next=4,e.axios.patch("/recipes/msgedit/"+e.recipe._id,a,{headers:{authorization:"Bearer "+e.$store.state.jwt.token}});case 4:e.$swal({icon:"success",title:"成功",text:"留言修改成功"}),e.recipe.comments[t].content=e.commentmodel,e.editdialog=!1,s.next=12;break;case 9:s.prev=9,s.t0=s["catch"](0),e.$swal({icon:"error",title:"錯誤",text:s.t0.response.data.message});case 12:case"end":return s.stop()}}),s,null,[[0,9]])})))()},delmsg:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,a={_id:e.recipe.comments[t]._id,isEnabled:0},s.next=4,e.axios.patch("/recipes/msgedit/"+e.recipe._id,a,{headers:{authorization:"Bearer "+e.$store.state.jwt.token}});case 4:e.$swal({icon:"success",title:"成功",text:"留言刪除成功"}),e.recipe.comments[t].isEnabled=0,e.msgdialog=!1,s.next=12;break;case 9:s.prev=9,s.t0=s["catch"](0),e.$swal({icon:"error",title:"錯誤",text:s.t0.response.data.message});case 12:case"end":return s.stop()}}),s,null,[[0,9]])})))()},submitreport:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,a={recipe:e.recipe._id,comment_id:e.recipe.comments[t]._id,reason:e.newreason,reportuser:e.user._id,commentuser:e.recipe.comments[t].users._id},s.next=4,e.axios.post("/reports/",a,{headers:{authorization:"Bearer "+e.$store.state.jwt.token}});case 4:e.$swal({icon:"success",title:"成功",text:"留言檢舉成功"}),e.reportdialog=!1,s.next=11;break;case 8:s.prev=8,s.t0=s["catch"](0),e.$swal({icon:"error",title:"錯誤",text:s.t0.response.data.message});case 11:case"end":return s.stop()}}),s,null,[[0,8]])})))()},nowstep:function(t){return this.recipe.instructions.length<10?"0".concat(t+1,"/0").concat(this.recipe.instructions.length):t+1<10?"0".concat(t+1,"/").concat(this.recipe.instructions.length):"".concat(t+1,"/").concat(this.recipe.instructions.length)},handleScroll:function(t){if(window.scrollY>200){var e=window.scrollY-200+85;window.scrollY+450<=document.getElementById("bigcarousel").offsetHeight&&(this.scrollY.transform="translateY("+e+"px)")}else this.scrollY.transform="translateY(0px)"}},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,i,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s=t,s.isLoading=!0,e.next=5,t.axios.get("/recipes/"+t.$route.params.id);case 5:return a=e.sent,i=a.data,r=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,t.recipe=i.result,t.recipe.image=i.result.image.map((function(t){return"".concat("https://recook-back.onrender.com/","/files/").concat(t)})),t.recipe.publish_date=i.result.publish_date.slice(0,10),t.recipe.comment_id=t.recipe.comments.map((function(t){return void 0!==t.users.avatar&&""!==t.users.avatar&&t.users.avatar.length>0&&(t.users.avatar="".concat("https://recook-back.onrender.com/","/files/").concat(t.users.avatar[0])),t})),document.title=t.recipe.name+"- Recook",i.result.video&&(t.recipe.video="https://www.youtube.com/embed/".concat(i.result.video.match(r)[7])),e.next=16,t.axios.get("/users/"+t.recipe.author);case 16:if(n=e.sent,t.author=n.data.result,t.author.total=void 0!==n.data.result.recipes?n.data.result.recipes.filter((function(t){return 1===t.recipe.isEnabled})).length:0,n.data.result.avatar.length>0&&(t.author.avatar="".concat("https://recook-back.onrender.com/","/files/").concat(n.data.result.avatar)),!t.user.islogin){e.next=28;break}return e.next=23,t.axios.get("/users/"+t.$store.state.user._id);case 23:o=e.sent,t.nowuser={follow:!1,like:!1,favorite:!1,following:o.data.result.following,likes:o.data.result.likes,favorites:o.data.result.favorites},void 0!==t.nowuser.following&&t.nowuser.following.some((function(e){return e.users._id===t.author._id}))?t.nowuser.follow=!0:t.nowuser.follow=!1,void 0!==t.nowuser.likes&&t.nowuser.likes.some((function(e){return e.recipes===t.recipe._id}))?t.nowuser.like=!0:t.nowuser.like=!1,void 0!==t.nowuser.favorites&&t.nowuser.favorites.some((function(e){return e.recipes===t.recipe._id}))?t.nowuser.favorite=!0:t.nowuser.favorite=!1;case 28:s.isLoading=!1,e.next=34;break;case 31:e.prev=31,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得商品失敗"});case 34:case"end":return e.stop()}}),e,null,[[0,31]])})))()},watch:{msgdialog:{handler:function(){this.msgdialog&&(this.user.islogin||this.$router.push("/login"))},deep:!0},reportdialog:{handler:function(){this.reportdialog&&(this.user.islogin||this.$router.push("/login"))},deep:!0},editdialog:{handler:function(){this.editdialog&&(this.user.islogin||this.$router.push("/login"))},deep:!0}}},l=c,u=s("2877"),d=s("6544"),v=s.n(d),h=s("8212"),p=s("8336"),m=s("b0af"),f=s("99d9"),g=s("5530"),w=(s("a9e3"),s("63b7"),s("f665")),_=s("afdd"),x=s("9d26"),b=s("37c6"),k=s("604c"),C=k["a"].extend({name:"button-group",provide:function(){return{btnToggle:this}},computed:{classes:function(){return k["a"].options.computed.classes.call(this)}},methods:{genData:k["a"].options.methods.genData}}),y=s("80d2"),$=s("d9bd"),D=w["a"].extend({name:"v-carousel",props:{continuous:{type:Boolean,default:!0},cycle:Boolean,delimiterIcon:{type:String,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:function(t){return t>0}},mandatory:{type:Boolean,default:!0},progress:Boolean,progressColor:String,showArrows:{type:Boolean,default:!0},verticalDelimiters:{type:String,default:void 0}},provide:function(){return{parentTheme:this.theme}},data:function(){return{internalHeight:this.height,slideTimeout:void 0}},computed:{classes:function(){return Object(g["a"])(Object(g["a"])({},w["a"].options.computed.classes.call(this)),{},{"v-carousel":!0,"v-carousel--hide-delimiter-background":this.hideDelimiterBackground,"v-carousel--vertical-delimiters":this.isVertical})},isDark:function(){return this.dark||!this.light},isVertical:function(){return null!=this.verticalDelimiters}},watch:{internalValue:"restartTimeout",interval:"restartTimeout",height:function(t,e){t!==e&&t&&(this.internalHeight=t)},cycle:function(t){t?this.restartTimeout():(clearTimeout(this.slideTimeout),this.slideTimeout=void 0)}},created:function(){this.$attrs.hasOwnProperty("hide-controls")&&Object($["a"])("hide-controls",':show-arrows="false"',this)},mounted:function(){this.startTimeout()},methods:{genControlIcons:function(){return this.isVertical?null:w["a"].options.methods.genControlIcons.call(this)},genDelimiters:function(){return this.$createElement("div",{staticClass:"v-carousel__controls",style:{left:"left"===this.verticalDelimiters&&this.isVertical?0:"auto",right:"right"===this.verticalDelimiters?0:"auto"}},[this.genItems()])},genItems:function(){for(var t=this,e=this.items.length,s=[],a=0;a<e;a++){var i=this.$createElement(_["a"],{staticClass:"v-carousel__controls__item",attrs:{"aria-label":this.$vuetify.lang.t("$vuetify.carousel.ariaLabel.delimiter",a+1,e)},props:{icon:!0,small:!0,value:this.getValue(this.items[a],a)}},[this.$createElement(x["a"],{props:{size:18}},this.delimiterIcon)]);s.push(i)}return this.$createElement(C,{props:{value:this.internalValue,mandatory:this.mandatory},on:{change:function(e){t.internalValue=e}}},s)},genProgress:function(){return this.$createElement(b["a"],{staticClass:"v-carousel__progress",props:{color:this.progressColor,value:(this.internalIndex+1)/this.items.length*100}})},restartTimeout:function(){this.slideTimeout&&clearTimeout(this.slideTimeout),this.slideTimeout=void 0,window.requestAnimationFrame(this.startTimeout)},startTimeout:function(){this.cycle&&(this.slideTimeout=window.setTimeout(this.next,+this.interval>0?+this.interval:6e3))}},render:function(t){var e=w["a"].options.render.call(this,t);return e.data.style="height: ".concat(Object(y["g"])(this.height),";"),this.hideDelimiters||e.children.push(this.genDelimiters()),(this.progress||this.progressColor)&&e.children.push(this.genProgress()),e}}),j=s("1e6c"),O=s("adda"),z=s("58df"),V=s("1c87"),S=Object(z["a"])(j["a"],V["a"]),T=S.extend().extend({name:"v-carousel-item",inject:{parentTheme:{default:{isDark:!1}}},provide:function(){return{theme:this.parentTheme}},inheritAttrs:!1,methods:{genDefaultSlot:function(){return[this.$createElement(O["a"],{staticClass:"v-carousel__item",props:Object(g["a"])(Object(g["a"])({},this.$attrs),{},{height:this.windowGroup.internalHeight}),on:this.$listeners,scopedSlots:{placeholder:this.$scopedSlots.placeholder}},Object(y["r"])(this))]},genWindowItem:function(){var t=this.generateRouteLink(),e=t.tag,s=t.data;return s.staticClass="v-window-item",s.directives.push({name:"show",value:this.isActive}),this.$createElement(e,s,this.genDefaultSlot())}}}),R=s("62ad"),B=s("a523"),E=s("169a"),A=s("ce7e"),I=s("132d"),Y=s("8860"),L=s("da13"),P=s("e449"),F=s("0fd9"),H=s("8dd9"),M=s("2fa4"),q=s("ade3"),J=(s("caad"),s("c7cd"),s("8cd0"),s("f2e7")),N=s("fe6c"),G=s("f40d"),W=s("a293"),K=Object(z["a"])(N["a"],J["a"],G["a"]).extend({name:"v-speed-dial",directives:{ClickOutside:W["a"]},props:{direction:{type:String,default:"top",validator:function(t){return["top","right","bottom","left"].includes(t)}},openOnHover:Boolean,transition:{type:String,default:"scale-transition"}},computed:{classes:function(){var t;return t={"v-speed-dial":!0,"v-speed-dial--top":this.top,"v-speed-dial--right":this.right,"v-speed-dial--bottom":this.bottom,"v-speed-dial--left":this.left,"v-speed-dial--absolute":this.absolute,"v-speed-dial--fixed":this.fixed},Object(q["a"])(t,"v-speed-dial--direction-".concat(this.direction),!0),Object(q["a"])(t,"v-speed-dial--is-active",this.isActive),t}},render:function(t){var e=this,s=[],a={class:this.classes,directives:[{name:"click-outside",value:function(){return e.isActive=!1}}],on:{click:function(){return e.isActive=!e.isActive}}};if(this.openOnHover&&(a.on.mouseenter=function(){return e.isActive=!0},a.on.mouseleave=function(){return e.isActive=!1}),this.isActive){var i=0;s=(this.$slots.default||[]).map((function(e,s){return!e.tag||"undefined"===typeof e.componentOptions||"v-btn"!==e.componentOptions.Ctor.options.name&&"v-tooltip"!==e.componentOptions.Ctor.options.name?(e.key=s,e):(i++,t("div",{style:{transitionDelay:.05*i+"s"},key:s},[e]))}))}var r=t("transition-group",{class:"v-speed-dial__list",props:{name:this.transition,mode:this.mode,origin:this.origin,tag:"div"}},s);return t("div",a,[this.$slots.activator,r])}}),Q=s("a844"),U=Object(u["a"])(l,a,i,!1,null,null,null);e["default"]=U.exports;v()(U,{VAvatar:h["a"],VBtn:p["a"],VCard:m["a"],VCardText:f["b"],VCarousel:D,VCarouselItem:T,VCol:R["a"],VContainer:B["a"],VDialog:E["a"],VDivider:A["a"],VIcon:I["a"],VList:Y["a"],VListItem:L["a"],VMenu:P["a"],VRow:F["a"],VSheet:H["a"],VSpacer:M["a"],VSpeedDial:K,VTextarea:Q["a"]})}}]);
//# sourceMappingURL=recipeinfo.7242147e.js.map