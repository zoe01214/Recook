(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["products"],{e6dc:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pa-0 mb-12",attrs:{id:"products",fluid:""}},[a("v-container",{staticClass:"mb-4"},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-sheet",{staticClass:"px-12 d-flex align-center"},[a("h2",{staticClass:"header-title mr-6"},[t._v("主廚市集")]),a("v-divider")],1)],1)],1)],1),a("v-container",[a("v-sheet",{staticClass:"mx-10 rounded-xl bg-white-2"},[a("v-row",{staticClass:"py-5"},t._l(t.products,(function(e,s){return e.sell?a("v-col",{key:e._id,staticClass:"mb-12",attrs:{cols:"12",lg:"4",md:"6",sm:"12"}},[a("router-link",{staticClass:"d-flex justify-center",attrs:{to:"/products/"+e._id}},[a("v-card",{staticClass:"text-center bgtrans",attrs:{flat:"","max-width":"550px"}},[a("v-sheet",{staticClass:"bgtrans px-12 d-flex justify-center"},[a("v-img",{staticClass:"circle",attrs:{contain:"","max-width":"230px",src:e.image[0]}})],1),a("v-sheet",{staticClass:"px-12 text-left bgtrans"},[a("v-divider",{staticClass:"my-3"}),a("div",{staticClass:"mb-2 name single-line"},[t._v(t._s(e.name))]),a("div",{staticClass:"mb-5 text-subtitle-1 shcut"},[t._v(t._s(e.shortcut))]),a("v-sheet",{staticClass:"btnborder d-flex align-center text-center bgtrans"},[a("div",{staticClass:"pa-2 pricetext"},[t._v("NT."+t._s(e.price))]),a("button",{staticClass:"pa-2 bagtext",on:{click:function(a){return a.preventDefault(),t.addcart(e._id)}}},[t._v("放進購物車")])])],1)],1)],1)],1):t._e()})),1)],1)],1)],1)},r=[],n=a("1da1"),c=(a("d81d"),a("99af"),a("96cf"),{name:"Products",data:function(){return{products:[]}},methods:{addcart:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e.user.islogin){a.next=17;break}return 0===e.$store.state.jwt.token.length&&e.$router.push("/login"),a.prev=2,a.next=5,e.axios.post("/users/cart",{product:t,amount:1},{headers:{authorization:"Bearer "+e.$store.state.jwt.token}});case 5:return e.$swal({icon:"success",title:"成功",text:"成功購物車"}),a.next=8,e.axios.get("/users/cart",{headers:{authorization:"Bearer "+e.$store.state.jwt.token}});case 8:s=a.sent,e.$store.commit("changecart",s.data.result),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](2),e.$swal({icon:"error",title:"錯誤",text:"加入購物車失敗"});case 15:a.next=18;break;case 17:e.$router.push("/login");case 18:case"end":return a.stop()}}),a,null,[[2,12]])})))()}},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get("/products");case 3:a=e.sent,s=a.data,t.products=s.result.map((function(t){return t.image=t.image.map((function(t){return"".concat("https://recook-recipe-web.herokuapp.com","/files/").concat(t)})),t})),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}),i=c,o=a("2877"),u=a("6544"),l=a.n(u),d=a("b0af"),p=a("62ad"),v=a("a523"),m=a("ce7e"),h=a("adda"),x=a("0fd9"),f=a("8dd9"),b=Object(o["a"])(i,s,r,!1,null,null,null);e["default"]=b.exports;l()(b,{VCard:d["a"],VCol:p["a"],VContainer:v["a"],VDivider:m["a"],VImg:h["a"],VRow:x["a"],VSheet:f["a"]})}}]);
//# sourceMappingURL=products.91868eef.js.map