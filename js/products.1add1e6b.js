(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["products"],{e6dc:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pa-0 px-lg-12 mb-12",attrs:{fluid:"",id:"products"}},[a("v-sheet",{staticClass:"mx-3 px-lg-12 d-flex align-center mb-12"},[a("h2",{staticClass:"header-title mr-6"},[t._v("主廚市集")]),a("v-divider")],1),a("v-sheet",{staticClass:"mx-3 mx-lg-10 pa-8 rounded-xl bg-white-2 mt-12"},[a("v-row",{staticClass:"py-5"},t._l(t.products,(function(e,r){return e.sell?a("v-col",{key:e._id,staticClass:"mb-12",attrs:{cols:"12",md:"6",lg:"4"}},[a("router-link",{staticClass:"d-flex justify-center",attrs:{to:"/products/"+e._id}},[a("v-card",{staticClass:"mx-3 mx-lg-12 text-center bgtrans",attrs:{id:"productcard",flat:"","max-width":"550px"}},[a("v-sheet",{staticClass:"bgtrans px-12 d-flex justify-center"},[a("v-img",{staticClass:"circle",attrs:{contain:"","max-width":"230px",src:e.image[0]}})],1),a("v-sheet",{staticClass:"text-left bgtrans"},[a("v-divider",{staticClass:"my-3"}),a("div",{staticClass:"mb-2 name single-line"},[t._v(t._s(e.name))]),a("div",{staticClass:"mb-5 text-subtitle-1 shcut"},[t._v(t._s(e.shortcut))]),a("v-sheet",{staticClass:"btnborder d-flex align-center text-center bgtrans"},[a("div",{staticClass:"pa-2 pricetext",style:t.greyoutline(e.quantity)},[t._v("NT."+t._s(e.price))]),a("button",{staticClass:"pa-2 bagtext",style:t.outofstock(e.quantity),on:{click:function(a){return a.preventDefault(),t.addcart(e._id)}}},[t._v(t._s(t.outofstocktext(e.quantity)))])])],1)],1)],1)],1):t._e()})),1)],1)],1)},s=[],n=a("1da1"),c=(a("d81d"),a("99af"),a("96cf"),{name:"Products",data:function(){return{products:[]}},methods:{addcart:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e.user.islogin){a.next=17;break}return 0===e.$store.state.jwt.token.length&&e.$router.push("/login"),a.prev=2,a.next=5,e.axios.post("/users/cart",{product:t,amount:1},{headers:{authorization:"Bearer "+e.$store.state.jwt.token}});case 5:return e.$swal({icon:"success",title:"成功",text:"成功購物車"}),a.next=8,e.axios.get("/users/cart",{headers:{authorization:"Bearer "+e.$store.state.jwt.token}});case 8:r=a.sent,e.$store.commit("changecart",r.data.result),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](2),e.$swal({icon:"error",title:"錯誤",text:"加入購物車失敗"});case 15:a.next=18;break;case 17:e.$router.push("/login");case 18:case"end":return a.stop()}}),a,null,[[2,12]])})))()},greyoutline:function(t){return 0===t?"border-color: #c9c5c1;":""},outofstock:function(t){return 0===t?"border-color: #c9c5c1;background-color:#c9c5c1;":""},outofstocktext:function(t){return 0===t?"商品已售完":"放進購物車"}},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get("/products");case 3:a=e.sent,r=a.data,t.products=r.result.map((function(t){return t.image=t.image.map((function(t){return"".concat("https://recook-recipe-web.herokuapp.com","/files/").concat(t)})),t})),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}),i=c,o=a("2877"),u=a("6544"),l=a.n(u),d=a("b0af"),p=a("62ad"),x=a("a523"),m=a("ce7e"),f=a("adda"),v=a("0fd9"),h=a("8dd9"),g=Object(o["a"])(i,r,s,!1,null,null,null);e["default"]=g.exports;l()(g,{VCard:d["a"],VCol:p["a"],VContainer:x["a"],VDivider:m["a"],VImg:f["a"],VRow:v["a"],VSheet:h["a"]})}}]);
//# sourceMappingURL=products.1add1e6b.js.map