(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["checkout"],{"4bd4":function(e,t,a){"use strict";var r=a("5530"),i=(a("caad"),a("2532"),a("07ac"),a("4de4"),a("159b"),a("7db0"),a("58df")),n=a("7e2b"),s=a("3206");t["a"]=Object(i["a"])(n["a"],Object(s["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(e){var t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(e){var t=this,a=function(e){return e.$watch("hasError",(function(a){t.$set(t.errorBag,e._uid,a)}),{immediate:!0})},r={_uid:e._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?r.shouldValidate=e.$watch("shouldValidate",(function(i){i&&(t.errorBag.hasOwnProperty(e._uid)||(r.valid=a(e)))})):r.valid=a(e),r},validate:function(){return 0===this.inputs.filter((function(e){return!e.validate(!0)})).length},reset:function(){this.inputs.forEach((function(e){return e.reset()})),this.resetErrorBag()},resetErrorBag:function(){var e=this;this.lazyValidation&&setTimeout((function(){e.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(e){return e.resetValidation()})),this.resetErrorBag()},register:function(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister:function(e){var t=this.inputs.find((function(t){return t._uid===e._uid}));if(t){var a=this.watchers.find((function(e){return e._uid===t._uid}));a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter((function(e){return e._uid!==t._uid})),this.inputs=this.inputs.filter((function(e){return e._uid!==t._uid})),this.$delete(this.errorBag,t._uid)}}},render:function(e){var t=this;return e("form",{staticClass:"v-form",attrs:Object(r["a"])({novalidate:!0},this.attrs$),on:{submit:function(e){return t.$emit("submit",e)}}},this.$slots.default)}})},"6e95":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-text-field",{attrs:{outlined:"","append-icon":"$vuetify.icons.plus",label:e.label,mask:e.mask,outline:e.outline,"prepend-inner-icon":"$vuetify.icons.minus",rules:e.rules,value:e.value,dense:"",solo:"",flat:"",color:"orange"},on:{"click:append":function(t){return t.stopPropagation(),e.increase.apply(null,arguments)},"click:prepend-inner":function(t){return t.stopPropagation(),e.decrease.apply(null,arguments)},change:function(t){return e.$emit("input",t)}}})},i=[],n=(a("a9e3"),{props:{label:{type:String,default:""},min:{type:Number,default:1},max:{type:Number,default:9999},maxLength:{type:Number,default:4},outline:{type:Boolean,default:!0},rules:{type:Array,default:function(){return[]}},step:{type:Number,default:1},height:{type:String},value:[String,Number]},computed:{mask:function(){for(var e="",t=0;t<this.maxLength;t++)e="".concat(e,"#");return e}},methods:{increase:function(){if(isNaN(parseInt(this.value)))return this.$emit("input",this.step);this.value!==this.max&&this.$emit("input",parseInt(this.value)+this.step)},decrease:function(){if(isNaN(parseInt(this.value)))return this.$emit("input",this.min);this.value!==this.min&&this.$emit("input",parseInt(this.value)-this.step)}}}),s=n,u=a("2877"),l=a("6544"),d=a.n(l),c=a("8654"),o=Object(u["a"])(s,r,i,!1,null,null,null);t["a"]=o.exports;d()(o,{VTextField:c["a"]})},"7cb4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"pa-0 px-lg-12 mb-12",attrs:{id:"checkout",fluid:""}},[a("v-sheet",{staticClass:"mx-3 px-lg-12 d-flex align-center mb-12"},[a("h2",{staticClass:"header-title mr-6"},[e._v("訂單資料")]),a("v-divider")],1),a("v-sheet",{staticClass:"mx-3 mx-lg-10 pa-8 rounded-xl bg-white-2 mt-12"},[a("p",{staticClass:"font-h3"},[e._v("1.收件人資料")]),a("v-form",[a("v-text-field",{attrs:{outlined:"",label:"收件人姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),a("v-text-field",{attrs:{outlined:"",label:"收件人手機號碼",maxlength:"10"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),a("v-text-field",{attrs:{outlined:"",label:"請輸入地址"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),a("p",{staticClass:"font-h3"},[e._v("2.付款資訊")]),a("vue-paycard",{attrs:{"value-fields":e.valueFields,valueFields:e.valueFields}}),a("v-form",[a("p",[e._v("卡號")]),a("v-text-field",{attrs:{"data-card-field":"",outlined:"",autocomplete:"off",maxLength:e.cardNumberMaxLength,id:e.inputFields.cardNumber},on:{input:e.changeNumber},model:{value:e.valueFields.cardNumber,callback:function(t){e.$set(e.valueFields,"cardNumber",t)},expression:"valueFields.cardNumber"}}),a("p",[e._v("姓名(英文字母)")]),a("v-text-field",{attrs:{"data-card-field":"",outlined:"",id:e.inputFields.cardName},model:{value:e.valueFields.cardName,callback:function(t){e.$set(e.valueFields,"cardName",t)},expression:"valueFields.cardName"}}),a("div",{staticClass:"d-flex"},[a("div",{staticClass:"mr-12"},[a("p",[e._v("有效日期")]),a("div",{staticClass:"d-flex"},[a("v-select",{staticClass:"mr-3",attrs:{"data-card-field":"",outlined:"",id:e.inputFields.cardMonth,items:e.month},model:{value:e.valueFields.cardMonth,callback:function(t){e.$set(e.valueFields,"cardMonth",t)},expression:"valueFields.cardMonth"}}),a("v-select",{attrs:{"data-card-field":"",outlined:"",id:e.inputFields.cardYear,items:e.year},model:{value:e.valueFields.cardYear,callback:function(t){e.$set(e.valueFields,"cardYear",t)},expression:"valueFields.cardYear"}})],1)]),a("div",[a("p",[e._v("末三碼")]),a("v-text-field",{attrs:{"data-card-field":"",autocomplete:"off",maxlength:"3",id:e.inputFields.cardCvv,outlined:""},model:{value:e.valueFields.cardCvv,callback:function(t){e.$set(e.valueFields,"cardCvv",e._n(t))},expression:"valueFields.cardCvv"}})],1)])],1),a("v-btn",{staticClass:"white--text my-6",attrs:{block:"",elevation:"0",color:"#DEA56A"},on:{click:e.checkout}},[a("span",{staticClass:"font-h3"},[e._v("送出訂單")])])],1)],1)},i=[],n=a("5530"),s=a("1da1"),u=(a("96cf"),a("b0c0"),a("ac1f"),a("5319"),a("d81d"),a("99af"),a("6e95")),l={name:"Cart",data:function(){return{cart:[],form:{name:"",phone:"",address:"",credit:""},valueFields:{cardName:"",cardNumber:"",cardMonth:"",cardYear:"",cardCvv:""},inputFields:{cardNumber:"v-card-number",cardName:"v-card-name",cardMonth:"v-card-month",cardYear:"v-card-year",cardCvv:"v-card-cvv"},month:[],year:[],cardNumberMaxLength:19}},components:{InputNumber:u["a"]},methods:{checkout:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={name:e.form.name,phone:e.form.phone,address:e.form.address,credit:e.valueFields.cardNumber},t.next=4,e.axios.post("/orders",a,{headers:{authorization:"Bearer "+e.$store.state.jwt.token}});case 4:e.$swal({icon:"success",title:"成功",text:"您的訂單已送出"}),e.$store.commit("changecart",{}),e.$router.push("/orders"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$swal({icon:"error",title:"錯誤",text:"結帳失敗"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},changeNumber:function(e){var t=this.valueFields.cardNumber.replace(/\D/g,"");if(/^3[47]\d{0,13}$/.test(t)?(this.valueFields.cardNumber=t.replace(/(\d{4})/,"$1 ").replace(/(\d{4}) (\d{6})/,"$1 $2 "),this.cardNumberMaxLength=17):/^3(?:0[0-5]|[68]\d)\d{0,11}$/.test(t)?(this.valueFields.cardNumber=t.replace(/(\d{4})/,"$1 ").replace(/(\d{4}) (\d{6})/,"$1 $2 "),this.cardNumberMaxLength=16):/^62[0-9]\d*/.test(t)?(this.valueFields.cardNumber=t.replace(/(\d{6})/,"$1 ").replace(/(\d{6}) (\d{7})/,"$1 $2 ").replace(/(\d{6}) (\d{7}) (\d{6})/,"$1 $2 $3 ").replace(/(\d{5}) (\d{5}) (\d{5}) (\d{4})/,"$1 $2 $3 $4"),this.cardNumberMaxLength=21):/^\d{0,16}$/.test(t)&&(this.valueFields.cardNumber=t.replace(/(\d{4})/,"$1 ").replace(/(\d{4}) (\d{4})/,"$1 $2 ").replace(/(\d{4}) (\d{4}) (\d{4})/,"$1 $2 $3 "),this.cardNumberMaxLength=19),"deleteContentBackward"===e.inputType){var a=this.valueFields.cardNumber.substring(this.valueFields.cardNumber.length,this.valueFields.cardNumber.length-1);" "===a&&(this.valueFields.cardNumber=this.valueFields.cardNumber.substring(0,this.valueFields.cardNumber.length-1))}}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,i,s,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get("/users/cart",{headers:{authorization:"Bearer "+e.$store.state.jwt.token}});case 3:for(a=t.sent,r=a.data,e.cart=r.result.map((function(e){return e=Object(n["a"])(Object(n["a"])({},e.product),{},{amount:e.amount}),e.image=e.image.map((function(t){return"".concat("https://recook-recipe-web.herokuapp.com","/files/").concat(e.image)}))[0],e.amountModel=e.amount,e})),i=1;i<13;i++)s="",s=i<10?"0".concat(i):"".concat(i),e.month.push(s);for(u=(new Date).getFullYear(),l=u;l<u+17;l++)e.year.push(l);t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.$swal({icon:"error",title:"錯誤",text:"取得購物車失敗"});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}},d=l,c=a("2877"),o=a("6544"),h=a.n(o),m=a("8336"),p=a("a523"),v=a("ce7e"),f=a("4bd4"),b=a("b974"),$=a("8dd9"),g=a("8654"),x=Object(c["a"])(d,r,i,!1,null,null,null);t["default"]=x.exports;h()(x,{VBtn:m["a"],VContainer:p["a"],VDivider:v["a"],VForm:f["a"],VSelect:b["a"],VSheet:$["a"],VTextField:g["a"]})}}]);
//# sourceMappingURL=checkout.9e1fb4eb.js.map